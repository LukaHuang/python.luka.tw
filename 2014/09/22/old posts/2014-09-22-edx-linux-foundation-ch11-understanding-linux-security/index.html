<!DOCTYPE html><html class="appearance-light" lang="en"><head><meta charset="UTF-8"><title>EDX Linux Foundation Ch11：Local Security Principle section 1~3</title><meta name="description"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/widget-post-list.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="Section 1 Understanding Linux Security使用者權限的管理在個人電腦上可以放輕鬆使用，但如果是多人共用的電腦，就必須限制的嚴格，最好只給用戶他所可以用的權限就好，不要多給，本章將會以最嚴格的標準來說明如何管理使用者的權限以增加安全性。
User AccountsFor each user, the following seven fields are maintained in the /etc/passwd file:
Types of AccountsBy default, Linux distinguishes between several account types in order to isolate processes and workloads. Linu.."><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Luka.tw</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">EDX Linux Foundation Ch11：Local Security Principle section 1~3</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><div class="post-container" style="position: sticky; top: 50px;"><main class="aside-card-container categories-widget category-page"><h3 style="font-size:1em;">Categories</h3><section><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/01-Python-%E5%9F%BA%E7%A4%8E%E6%95%99%E5%AD%B8/">01 Python 基礎教學</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/02-Python-%E7%88%AC%E8%9F%B2%E6%95%99%E5%AD%B8/">02 Python 爬蟲教學</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/03-Python-Flask-%E6%95%99%E5%AD%B8/">03 Python Flask 教學</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/04-Python-Django-%E6%95%99%E5%AD%B8/">04 Python Django 教學</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/05-Python-%E8%B3%87%E6%96%99%E5%BA%AB%E6%95%99%E5%AD%B8/">05 Python 資料庫教學</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/06-Python-%E8%B3%87%E6%96%99%E5%88%86%E6%9E%90/">06 Python 資料分析</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/07-Python-%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92/">07 Python 機器學習</a><span class="category-list-count">1</span></li></ul></section></main><div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Section-1-Understanding-Linux-Security"><span class="toc-text">Section 1 Understanding Linux Security</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Accounts"><span class="toc-text">User Accounts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Types-of-Accounts"><span class="toc-text">Types of Accounts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Understanding-the-root-Account"><span class="toc-text">Understanding the root Account</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#section-2-Understanding-the-usage-of-root"><span class="toc-text">section 2: Understanding the usage of root</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Operations-that-Require-root-Privileges"><span class="toc-text">Operations that Require root Privileges</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-a-New-User-in-Linux"><span class="toc-text">Creating a New User in Linux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Operations-That-Do-Not-Require-root-Privileges"><span class="toc-text">Operations That Do Not Require root Privileges</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SUID%EF%BC%88Set-owner-User-ID-upon-execution%EF%BC%89"><span class="toc-text">SUID（Set owner User ID upon execution）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Section-3-Comparing-sudo-and-su"><span class="toc-text">Section 3:Comparing sudo and su</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-sudoers-File"><span class="toc-text">The sudoers File</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Edit-sudoers"><span class="toc-text">Edit sudoers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#etc-sudoers-d"><span class="toc-text">&#x2F;etc&#x2F;sudoers.d</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Command-Logging"><span class="toc-text">Command Logging</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Process-Isolation"><span class="toc-text">Process Isolation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hardware-Device-Access"><span class="toc-text">Hardware Device Access</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#device-special-file-often-called-a-device-node-under-the-dev-directory-that-corresponds-to-the-device-being-accessed"><span class="toc-text">device special file (often called a device node) under the &#x2F;dev directory that corresponds to the device being accessed.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dev-sd"><span class="toc-text">&#x2F;dev&#x2F;sd*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Keeping-Current"><span class="toc-text">Keeping Current</span></a></li></ol></li></ol></div></div></div><div class="column is-9"><header class="my-4"><a href="/tags/Linux"><i class="tag post-item-tag">Linux</i></a><a href="/tags/EDX-Linux-Foundation"><i class="tag post-item-tag">EDX Linux Foundation</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">EDX Linux Foundation Ch11：Local Security Principle section 1~3</h1><time class="has-text-grey" datetime="2014-09-21T23:53:00.000Z">2014-09-22</time><article class="mt-2 post-content"><h1 id="Section-1-Understanding-Linux-Security"><a href="#Section-1-Understanding-Linux-Security" class="headerlink" title="Section 1 Understanding Linux Security"></a>Section 1 Understanding Linux Security</h1><p>使用者權限的管理在個人電腦上可以放輕鬆使用，但如果是多人共用的電腦，就必須限制的嚴格，最好只給用戶他所可以用的權限就好，不要多給，本章將會以最嚴格的標準來說明如何管理使用者的權限以增加安全性。</p>
<h2 id="User-Accounts"><a href="#User-Accounts" class="headerlink" title="User Accounts"></a>User Accounts</h2><p>For each user, the following seven fields are maintained in the /etc/passwd file:<br><img src="https://lh5.googleusercontent.com/Qizgf3rUafom1Uf72hKqjWWcp911th-wiySVy0Rct4o=w1483-h1185-no"></p>
<h2 id="Types-of-Accounts"><a href="#Types-of-Accounts" class="headerlink" title="Types of Accounts"></a>Types of Accounts</h2><p>By default, Linux distinguishes between several account types in order to isolate processes and workloads. Linux has four types of accounts:</p>
<ul>
<li>root</li>
<li>System</li>
<li>Normal</li>
<li>Network</li>
</ul>
<p> The <code>last</code> utility, which shows the last time each user logged into the system, can be used to help identify potentially inactive accounts which are candidates for system removal.</p>
<h2 id="Understanding-the-root-Account"><a href="#Understanding-the-root-Account" class="headerlink" title="Understanding the root Account"></a>Understanding the root Account</h2><p> root is the most privileged account on a Linux/UNIX system. This account has the ability to carry out all facets of system administration, including adding accounts, changing user passwords, examining log files, installing software, etc. Utmost care must be taken when using this account. It has no security restrictions imposed upon it.</p>
<h1 id="section-2-Understanding-the-usage-of-root"><a href="#section-2-Understanding-the-usage-of-root" class="headerlink" title="section 2: Understanding the usage of root"></a>section 2: Understanding the usage of root</h1><h2 id="Operations-that-Require-root-Privileges"><a href="#Operations-that-Require-root-Privileges" class="headerlink" title="Operations that Require root Privileges"></a>Operations that Require root Privileges</h2><p> root privileges are required to perform operations such as:</p>
<ul>
<li>Creating, removing and managing user accounts.</li>
<li>Managing software packages.</li>
<li>Removing or modifying system files.</li>
<li>Restarting system services.</li>
</ul>
<p>一般用戶也可以安裝或是更新軟體，但是只有root帳號可以讓軟體做一些跟系統有關的事情。<br><img src="https://lh4.googleusercontent.com/IFzh7nozJnb-TvQqkzSRYh7acu0Hfyv_fYdNMIJTsDE=w1443-h948-no"></p>
<h2 id="Creating-a-New-User-in-Linux"><a href="#Creating-a-New-User-in-Linux" class="headerlink" title="Creating a New User in Linux"></a>Creating a New User in Linux</h2><p>useradd <username><br>passwd <username></p>
<h2 id="Operations-That-Do-Not-Require-root-Privileges"><a href="#Operations-That-Do-Not-Require-root-Privileges" class="headerlink" title="Operations That Do Not Require root Privileges"></a>Operations That Do Not Require root Privileges</h2><h3 id="SUID（Set-owner-User-ID-upon-execution）"><a href="#SUID（Set-owner-User-ID-upon-execution）" class="headerlink" title="SUID（Set owner User ID upon execution）"></a>SUID（Set owner User ID upon execution）</h3><p>SUID (similar to the Windows “run as” feature)is a special kind of file permission given to a file. SUID provides temporary permissions to a user to run a program with the permissions of the file owner  (which may be root) instead of the permissions held by the user.</p>
<p>當 s 這個標誌出現在檔案擁有者的 x 權限上時，例如<code>/usr/bin/passwd</code> 這個檔案的權限狀態：『-rwsr-xr-x』，此時就被稱為 Set UID，簡稱為 SUID 的特殊權限。明明 <code>/etc/shadow</code> 就不能讓 vbird 這個一般帳戶去存取的，為什麼還能夠修改這個檔案內的密碼呢？ 這就是 SUID 的功能!</p>
<ol>
<li>vbird 對於 <code>/usr/bin/passwd</code> 這個程式來說是具有 x 權限的，表示 vbird 能執行 passwd；</li>
<li>passwd 的擁有者是 root 這個帳號；</li>
<li>vbird 執行 passwd 的過程中，會『暫時』獲得 root 的權限；</li>
<li><code>/etc/shadow</code> 就可以被 vbird 所執行的 passwd 所修改。</li>
</ol>
<p>另外，SUID 僅可用在binary program 上， 不能夠用在 shell script 上面！這是因為 shell script 只是將很多的 binary 執行檔叫進來執行而已！</p>
<h1 id="Section-3-Comparing-sudo-and-su"><a href="#Section-3-Comparing-sudo-and-su" class="headerlink" title="Section 3:Comparing sudo and su"></a>Section 3:Comparing sudo and su</h1><p>Users’ authorization for using sudo is based on configuration information stored in the <code>/etc/sudoers</code> file and in the <code>/etc/sudoers.d</code> directory.</p>
<h2 id="The-sudoers-File"><a href="#The-sudoers-File" class="headerlink" title="The sudoers File"></a>The sudoers File</h2><p>Whenever sudo is invoked, a trigger will look at /etc/sudoers and the files in /etc/sudoers.d to determine if the user has the right to use sudo and what the scope of their privilege is. Unknown user requests and requests to do operations not allowed to the user.</p>
<h3 id="Edit-sudoers"><a href="#Edit-sudoers" class="headerlink" title="Edit sudoers"></a>Edit sudoers</h3><p> You can edit the <code>sudoers</code> file by using <code>visudo</code>, which ensures that only one person is editing the file at a time.</p>
<p>The basic structure of an entry is:</p>
<pre><code>who where = (as_whom) what
</code></pre>
<h3 id="etc-sudoers-d"><a href="#etc-sudoers-d" class="headerlink" title="/etc/sudoers.d"></a>/etc/sudoers.d</h3><p>Most Linux distributions now prefer you add a file in the directory <code>/etc/sudoers.d</code> with a name the same as the user. This file contains the individual user’s sudo configuration, and one should leave the master configuration file untouched except for changes that affect all users.</p>
<h2 id="Command-Logging"><a href="#Command-Logging" class="headerlink" title="Command Logging"></a>Command Logging</h2><p>By default, sudo commands and any failures are logged in <code>/var/log/auth.log</code> under the Debian distribution family, and in <code>/var/log/messages</code> or <code>/var/log/secure</code> on other systems.This is an important safeguard to allow for tracking and accountability of sudo use. A typical entry of the message contains:</p>
<p>Running a command such as sudo whoami results in a log file entry such as:<br>Dec 8 14:20:47 server1 sudo: op : TTY=pts/6 PWD=/var/log USER=root COMMAND=/usr/bin/whoami</p>
<h2 id="Process-Isolation"><a href="#Process-Isolation" class="headerlink" title="Process Isolation"></a>Process Isolation</h2><p>Linux is considered to be more secure than many other operating systems because processes are naturally isolated from each other. One process normally cannot access the resources of another process, even when that process is running with the same user privileges.</p>
<h2 id="Hardware-Device-Access"><a href="#Hardware-Device-Access" class="headerlink" title="Hardware Device Access"></a>Hardware Device Access</h2><h3 id="device-special-file-often-called-a-device-node-under-the-dev-directory-that-corresponds-to-the-device-being-accessed"><a href="#device-special-file-often-called-a-device-node-under-the-dev-directory-that-corresponds-to-the-device-being-accessed" class="headerlink" title="device special file (often called a device node) under the /dev directory that corresponds to the device being accessed."></a>device special file (often called a device node) under the /dev directory that corresponds to the device being accessed.</h3><h3 id="dev-sd"><a href="#dev-sd" class="headerlink" title="/dev/sd*"></a>/dev/sd*</h3><p>Hard disks, for example, are represented as /dev/sd*. While a root user can read and write to the disk in a raw fashion (for example, by doing something like:</p>
<pre><code>$ echo hello world &gt; /dev/sda1
</code></pre>
<p>寫入divice node很容易會毀掉整個檔案系統，所以絕對不要直接存取device node。</p>
<h2 id="Keeping-Current"><a href="#Keeping-Current" class="headerlink" title="Keeping Current"></a>Keeping Current</h2><p>The best practice is to take advantage of your Linux distribution’s mechanism for automatic updates and never postpone them. It is extremely rare that such an update will cause new problems.</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2014/09/22/old%20posts/2014-09-22-edx-linux-foundation-ch11-local-security-principle-section-45/" title="EDX Linux Foundation Ch11：Local Security Principle section 4~5"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: EDX Linux Foundation Ch11：Local Security Principle section 4~5</span></a><a class="button is-default" href="/2014/09/18/old%20posts/2014-09-18-agile-meetup-2014-in-september/" title="Agile Meetup 2014 9月：喚醒者的工具箱"><span class="has-text-weight-semibold">Next: Agile Meetup 2014 9月：喚醒者的工具箱</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="LukaHuang/" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/LukaHuang"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in/LukaHuang"><i class="iconfont icon-linkedin"></i></a><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//CodeShiba"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Luka.tw 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo </p></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>